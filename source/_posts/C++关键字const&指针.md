---
title: C++关键字const&指针
date: 2021-7-01 20:05:18
categories: C++
tags:
---

## const作用

用来定义常量，具有不可变性。在类中，被const修饰的成员函数，不能修改类中的数据成员。

## 常量指针和指针常量

### 常量指针

` int const* p;  const int* p; `

**底层const**

这个指针指向的对象是一个常量，不能被修改，但是指针本身可以被修改。

### 指针常量

` int* const p; `

**顶层const**

该指针本身是一个常量，不能被修改，但是指针指向的对象可以被修改。

### 指向常量的常指针

` const int* const p;`

指向常量的指针常量就是一个常量，且它指向的对象也是一个常量。

```c++
//-------常量指针-------
const int *p1 = &a;
a = 300;     //OK,仍然可以通过原来的声明修改值，
//*p1 = 56;  //Error,*p1是const int的，不可修改，即常量指针不可修改其指向地址
p1 = &b;     //OK,指针还可以指向别处，因为指针只是个变量，可以随意指向；

//-------指针常量-------//
int*  const p2 = &a;
a = 500;     //OK,仍然可以通过原来的声明修改值，
*p2 = 400;   //OK,指针是常量，指向的地址不可以变化,但是指向的地址所对应的内容可以变化
//p2 = &b;     //Error,因为p2是const 指针，因此不能改变p2指向的内容

//-------指向常量的常量指针-------//
const int* const p3 = &a;
//*p3 = 1;    //Error
//p3 = &b;    //Error
a = 5000;    //OK,仍然可以通过原来的声明修改值
```


## const修饰函数

只能用在类的函数中。

const修饰的成员函数表明函数调用不会对对象做出任何更改，事实上，如果确认不会对对象做更改，就应该为函数加上const限定，这样无论const对象还是普通对象都可以调用该函数。

通常用在Getter函数中。

```c++
class Entity{
    private: int m_X,m_Y;
    public: 
        int GetX() const{
        return m_X;
    }
}

```

## mutable

可变的意思，使类中被声明为const的函数可以修改类中的非静态成员。

## const修饰的函数能否重载

可以重载。

const成员函数既不能改变类内的数据成员，也无法调用非const的成员函数；

const类对象只能调用const成员函数，非const对象无论是否是const成员函数都能调用，但是如果有重载的非const函数，非const对象会优先调用重载后的非const函数。

## constexpr的作用

这个关键字明确的告诉编译器应该去验证(函数或变量)在编译期是否就应该是一个常数（这样编译器就可以大胆进行优化）。