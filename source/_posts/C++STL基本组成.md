---
title: C++STL基本组成
date: 2021-8-01 15:08:20
categories: C++
tags:
---

## 六大组件

STL由六大组件构成：容器，算法，迭代器，仿函数，分配器，和配接器。

### 容器

STL提供的存放数据的类。

容器可以分为序列式容器和关联式容器两大类。

序列式容器主要有 vector、list 和 deque；关联式容器包括 set、map、multiset 和 multimap 等容器模板类。


目前，STL 中已经提供的容器主要如下：

    - vector <T>：一种向量。
    - list <T>：一个双向链表容器，完成了标准 C++ 数据结构中链表的所有功能。
    - queue <T>：一种队列容器，完成了标准 C++ 数据结构中队列的所有功能。
    - stack <T>：一种栈容器，完成了标准 C++ 数据结构中栈的所有功能。
    - deque <T>：双端队列容器，完成了标准 C++ 数据结构中栈的所有功能。
    - priority_queue <T>：一种按值排序的队列容器。
    - set <T>：一种集合容器。
    - multiset <T>：一种允许出现重复元素的集合容器。
    - map <key, val>：一种关联数组容器。
    - multimap <key, val>：一种允许出现重复 key 值的关联数组容器。

### 算法

处理元素的方法和操作。

STL 中的所有算法都是基于模板实现的。

### 迭代器

为容器提供一组公共接口。

    迭代器的作用，为什么有了指针还需要迭代器
    迭代器是访问容器的接口，他重载了很多类似指针的操作（++，--，*等），迭代器返回的是对象的引用而不是其本身。

    出现的原因：
    因为STL中容器都封装起来了，所以需要迭代器去访问，使得不用暴露容器的内部结构也能访问其数据。

---

    迭代器失效的问题

    1. 对于顺序容器vector，deque来说，使用erase(itertor)后，后边的每个元素的迭代器都会失效，但是后边每个元素都会往前移动一个位置，但是erase会返回下一个有效的迭代器；

    2. 对于关联容器map，set来说，使用了erase(iterator)后，当前元素的迭代器失效，但是其结构是红黑树，删除当前元素的，不会影响到下一个元素的迭代器，所以在调用erase之前，记录下一个元素的迭代器即可。【实际操作中在windows平台的STL里erase也会返回下一个迭代器】

    3. 对于list来说，它使用了不连续分配的内存，并且它的erase方法也会返回下一个有效的iterator，因此上面两种正确的方法都可以使用。

### 仿函数

仿函数具有泛型编程强大的威力，是纯粹抽象概念的例证。

### 分配器

内存管理。

### 配接器

实现不同类之间的数据转换。