---
title: C++编译链接原理
date: 2021-06-26 23:58:04
categories: C++
tags:
---
## 名词解释

**编译**：把源文件中的源代码翻译成机器语言，保存到目标文件中。如果编译通过，就会把CPP转换成OBJ文件。

**编译单元**：每个cpp就是一个编译单元，每个编译单元相互之间是独立且相互不知的。一个编译单元（Translation Unit）是指一个.cpp文件以及这所include的所有.h文件。

---

从c++源文件到可执行文件共有四个过程：

预处理阶段、编译阶段、汇编阶段、连接阶段。

1. 预处理阶段处理头文件包含关系，对预编译命令进行替换，生成预编译文件；
2. 编译阶段将预编译文件编译，生成汇编文件（编译的过程就是把预处理完的文件进行一系列的词法分析，语法分析，语义分析及优化后生成相应的汇编代码)；
3. 汇编阶段将汇编文件转换成机器码，生成可重定位目标文件（.obj文件）（汇编器是将汇编代码转变成机器可以执行的命令，每一个汇编语句几乎都对应一条机器指令。汇编相对于编译过程比较简单，根据汇编指令和机器指令的对照表一一翻译即可）；
4. 链接阶段，将多个目标文件和所需要的库连接成可执行文件（.exe文件）。